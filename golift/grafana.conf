# Grafana
location /grafana/ {
    auth_request     /auth-4;
    auth_request_set $user $upstream_http_x_organizr_user;
    add_header       X-WEBAUTH-USER $user;
    proxy_set_header X-WEBAUTH-USER $user;
    proxy_set_header X-Frame-Options "SAMEORIGIN";
    proxy_set_header Authorization "";
    proxy_pass       $grafana$request_uri;
}

# Chronograf
location /chronograf {
    auth_request     /auth-2;
    auth_request_set $user $upstream_http_x_organizr_user;
    add_header       X-WEBAUTH-USER $user;
    proxy_pass       $chronograf$request_uri;
}

# Prometheus
location /prometheus/ {
    auth_request     /auth-2;
    auth_request_set $user $upstream_http_x_organizr_user;
    add_header       X-WEBAUTH-USER $user;
    proxy_pass       $prometheus$request_uri;
}
